var F,d,ut,Ut,E,ot,ct,B,lt,T={},Y=[],Lt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,K=Array.isArray;function D(t,e){for(var _ in e)t[_]=e[_];return t}function ft(t){var e=t.parentNode;e&&e.removeChild(t)}function f(t,e,_){var n,r,o,a={};for(o in e)o=="key"?n=e[o]:o=="ref"?r=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?F.call(arguments,2):_),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)a[o]===void 0&&(a[o]=t.defaultProps[o]);return M(t,a,n,r,null)}function M(t,e,_,n,r){var o={type:t,props:e,key:_,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r==null?++ut:r,__i:-1,__u:0};return r==null&&d.vnode!=null&&d.vnode(o),o}function V(t){return t.children}function $(t,e){this.props=t,this.context=e}function H(t,e){if(e==null)return t.__?H(t.__,t.__i+1):null;for(var _;e<t.__k.length;e++)if((_=t.__k[e])!=null&&_.__e!=null)return _.__e;return typeof t.type=="function"?H(t):null}function At(t,e,_){var n,r=t.__v,o=r.__e,a=t.__P;if(a)return(n=D({},r)).__v=r.__v+1,d.vnode&&d.vnode(n),Q(a,n,r,t.__n,a.ownerSVGElement!==void 0,32&r.__u?[o]:null,e,o==null?H(r):o,!!(32&r.__u),_),n.__.__k[n.__i]=n,n.__d=void 0,n.__e!=o&&pt(n),n}function pt(t){var e,_;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((_=t.__k[e])!=null&&_.__e!=null){t.__e=t.__c.base=_.__e;break}return pt(t)}}function J(t){(!t.__d&&(t.__d=!0)&&E.push(t)&&!j.__r++||ot!==d.debounceRendering)&&((ot=d.debounceRendering)||ct)(j)}function j(){var t,e,_,n=[],r=[];for(E.sort(B);t=E.shift();)t.__d&&(_=E.length,e=At(t,n,r)||e,_===0||E.length>_?(z(n,e,r),r.length=n.length=0,e=void 0,E.sort(B)):e&&d.__c&&d.__c(e,Y));e&&z(n,e,r),j.__r=0}function dt(t,e,_,n,r,o,a,u,l,s,p){var i,h,c,y,S,g=n&&n.__k||Y,v=e.length;for(_.__d=l,Mt(_,e,g),l=_.__d,i=0;i<v;i++)(c=_.__k[i])!=null&&typeof c!="boolean"&&typeof c!="function"&&(h=c.__i===-1?T:g[c.__i]||T,c.__i=i,Q(t,c,h,r,o,a,u,l,s,p),y=c.__e,c.ref&&h.ref!=c.ref&&(h.ref&&X(h.ref,null,c),p.push(c.ref,c.__c||y,c)),S==null&&y!=null&&(S=y),65536&c.__u||h.__k===c.__k?l=ht(c,l,t):typeof c.type=="function"&&c.__d!==void 0?l=c.__d:y&&(l=y.nextSibling),c.__d=void 0,c.__u&=-196609);_.__d=l,_.__e=S}function Mt(t,e,_){var n,r,o,a,u,l=e.length,s=_.length,p=s,i=0;for(t.__k=[],n=0;n<l;n++)(r=t.__k[n]=(r=e[n])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?M(null,r,null,null,r):K(r)?M(V,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?M(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=t,r.__b=t.__b+1,u=$t(r,_,a=n+i,p),r.__i=u,o=null,u!==-1&&(p--,(o=_[u])&&(o.__u|=131072)),o==null||o.__v===null?(u==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):u!==a&&(u===a+1?i++:u>a?p>l-a?i+=u-a:i--:i=u<a&&u==a-1?u-a:0,u!==n+i&&(r.__u|=65536))):(o=_[n])&&o.key==null&&o.__e&&(o.__e==t.__d&&(t.__d=H(o)),G(o,o,!1),_[n]=null,p--);if(p)for(n=0;n<s;n++)(o=_[n])!=null&&!(131072&o.__u)&&(o.__e==t.__d&&(t.__d=H(o)),G(o,o))}function ht(t,e,_){var n,r;if(typeof t.type=="function"){for(n=t.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=t,e=ht(n[r],e,_));return e}t.__e!=e&&(_.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function $t(t,e,_,n){var r=t.key,o=t.type,a=_-1,u=_+1,l=e[_];if(l===null||l&&r==l.key&&o===l.type)return _;if(n>(l!=null&&!(131072&l.__u)?1:0))for(;a>=0||u<e.length;){if(a>=0){if((l=e[a])&&!(131072&l.__u)&&r==l.key&&o===l.type)return a;a--}if(u<e.length){if((l=e[u])&&!(131072&l.__u)&&r==l.key&&o===l.type)return u;u++}}return-1}function it(t,e,_){e[0]==="-"?t.setProperty(e,_==null?"":_):t[e]=_==null?"":typeof _!="number"||Lt.test(e)?_:_+"px"}function A(t,e,_,n,r){var o;t:if(e==="style")if(typeof _=="string")t.style.cssText=_;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)_&&e in _||it(t.style,e,"");if(_)for(e in _)n&&_[e]===n[e]||it(t.style,e,_[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=_,_?n?_.u=n.u:(_.u=Date.now(),t.addEventListener(e,o?st:at,o)):t.removeEventListener(e,o?st:at,o);else{if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=_==null?"":_;break t}catch{}typeof _=="function"||(_==null||_===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,_))}}function at(t){if(this.l){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(d.event?d.event(t):t)}}function st(t){if(this.l)return this.l[t.type+!0](d.event?d.event(t):t)}function Q(t,e,_,n,r,o,a,u,l,s){var p,i,h,c,y,S,g,v,k,x,N,P,rt,U,I,C=e.type;if(e.constructor!==void 0)return null;128&_.__u&&(l=!!(32&_.__u),o=[u=e.__e=_.__e]),(p=d.__b)&&p(e);t:if(typeof C=="function")try{if(v=e.props,k=(p=C.contextType)&&n[p.__c],x=p?k?k.props.value:p.__:n,_.__c?g=(i=e.__c=_.__c).__=i.__E:("prototype"in C&&C.prototype.render?e.__c=i=new C(v,x):(e.__c=i=new $(v,x),i.constructor=C,i.render=Ft),k&&k.sub(i),i.props=v,i.state||(i.state={}),i.context=x,i.__n=n,h=i.__d=!0,i.__h=[],i._sb=[]),i.__s==null&&(i.__s=i.state),C.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=D({},i.__s)),D(i.__s,C.getDerivedStateFromProps(v,i.__s))),c=i.props,y=i.state,i.__v=e,h)C.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(C.getDerivedStateFromProps==null&&v!==c&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(v,x),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(v,i.__s,x)===!1||e.__v===_.__v)){for(e.__v!==_.__v&&(i.props=v,i.state=i.__s,i.__d=!1),e.__e=_.__e,e.__k=_.__k,e.__k.forEach(function(L){L&&(L.__=e)}),N=0;N<i._sb.length;N++)i.__h.push(i._sb[N]);i._sb=[],i.__h.length&&a.push(i);break t}i.componentWillUpdate!=null&&i.componentWillUpdate(v,i.__s,x),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(c,y,S)})}if(i.context=x,i.props=v,i.__P=t,i.__e=!1,P=d.__r,rt=0,"prototype"in C&&C.prototype.render){for(i.state=i.__s,i.__d=!1,P&&P(e),p=i.render(i.props,i.state,i.context),U=0;U<i._sb.length;U++)i.__h.push(i._sb[U]);i._sb=[]}else do i.__d=!1,P&&P(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++rt<25);i.state=i.__s,i.getChildContext!=null&&(n=D(D({},n),i.getChildContext())),h||i.getSnapshotBeforeUpdate==null||(S=i.getSnapshotBeforeUpdate(c,y)),dt(t,K(I=p!=null&&p.type===V&&p.key==null?p.props.children:p)?I:[I],e,_,n,r,o,a,u,l,s),i.base=e.__e,e.__u&=-161,i.__h.length&&a.push(i),g&&(i.__E=i.__=null)}catch(L){e.__v=null,l||o!=null?(e.__e=u,e.__u|=l?160:32,o[o.indexOf(u)]=null):(e.__e=_.__e,e.__k=_.__k),d.__e(L,e,_)}else o==null&&e.__v===_.__v?(e.__k=_.__k,e.__e=_.__e):e.__e=jt(_.__e,e,_,n,r,o,a,l,s);(p=d.diffed)&&p(e)}function z(t,e,_){for(var n=0;n<_.length;n++)X(_[n],_[++n],_[++n]);d.__c&&d.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(o){o.call(r)})}catch(o){d.__e(o,r.__v)}})}function jt(t,e,_,n,r,o,a,u,l){var s,p,i,h,c,y,S,g=_.props,v=e.props,k=e.type;if(k==="svg"&&(r=!0),o!=null){for(s=0;s<o.length;s++)if((c=o[s])&&"setAttribute"in c==!!k&&(k?c.localName===k:c.nodeType===3)){t=c,o[s]=null;break}}if(t==null){if(k===null)return document.createTextNode(v);t=r?document.createElementNS("http://www.w3.org/2000/svg",k):document.createElement(k,v.is&&v),o=null,u=!1}if(k===null)g===v||u&&t.data===v||(t.data=v);else{if(o=o&&F.call(t.childNodes),g=_.props||T,!u&&o!=null)for(g={},s=0;s<t.attributes.length;s++)g[(c=t.attributes[s]).name]=c.value;for(s in g)c=g[s],s=="children"||(s=="dangerouslySetInnerHTML"?i=c:s==="key"||s in v||A(t,s,null,c,r));for(s in v)c=v[s],s=="children"?h=c:s=="dangerouslySetInnerHTML"?p=c:s=="value"?y=c:s=="checked"?S=c:s==="key"||u&&typeof c!="function"||g[s]===c||A(t,s,c,g[s],r);if(p)u||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),dt(t,K(h)?h:[h],e,_,n,r&&k!=="foreignObject",o,a,o?o[0]:_.__k&&H(_,0),u,l),o!=null)for(s=o.length;s--;)o[s]!=null&&ft(o[s]);u||(s="value",y!==void 0&&(y!==t[s]||k==="progress"&&!y||k==="option"&&y!==g[s])&&A(t,s,y,g[s],!1),s="checked",S!==void 0&&S!==t[s]&&A(t,s,S,g[s],!1))}return t}function X(t,e,_){try{typeof t=="function"?t(e):t.current=e}catch(n){d.__e(n,_)}}function G(t,e,_){var n,r;if(d.unmount&&d.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||X(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){d.__e(o,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(r=0;r<n.length;r++)n[r]&&G(n[r],e,_||typeof t.type!="function");_||t.__e==null||ft(t.__e),t.__=t.__e=t.__d=void 0}function Ft(t,e,_){return this.constructor(t,_)}function vt(t,e,_){var n,r,o,a;d.__&&d.__(t,e),r=(n=typeof _=="function")?null:_&&_.__k||e.__k,o=[],a=[],Q(e,t=(!n&&_||e).__k=f(V,null,[t]),r||T,T,e.ownerSVGElement!==void 0,!n&&_?[_]:r?null:e.firstChild?F.call(e.childNodes):null,o,!n&&_?_:r?r.__e:e.firstChild,n,a),t.__d=void 0,z(o,t,a)}function mt(t,e){var _={__c:e="__cC"+lt++,__:t,Consumer:function(n,r){return n.children(r)},Provider:function(n){var r,o;return this.getChildContext||(r=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.some(function(u){u.__e=!0,J(u)})},this.sub=function(a){r.push(a);var u=a.componentWillUnmount;a.componentWillUnmount=function(){r.splice(r.indexOf(a),1),u&&u.call(a)}}),n.children}};return _.Provider.__=_.Consumer.contextType=_}F=Y.slice,d={__e:function(t,e,_,n){for(var r,o,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,n||{}),a=r.__d),a)return r.__E=r}catch(u){t=u}throw t}},ut=0,Ut=function(t){return t!=null&&t.constructor==null},$.prototype.setState=function(t,e){var _;_=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=D({},this.state),typeof t=="function"&&(t=t(D({},_),this.props)),t&&D(_,t),t!=null&&this.__v&&(e&&this._sb.push(e),J(this))},$.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),J(this))},$.prototype.render=V,E=[],ct=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,B=function(t,e){return t.__v.__b-e.__v.__b},j.__r=0,lt=0;var w,m,Z,bt,O=0,Et=[],W=[],b=d,yt=b.__b,gt=b.__r,kt=b.diffed,Ct=b.__c,St=b.unmount,xt=b.__;function q(t,e){b.__h&&b.__h(m,t,O||e),O=0;var _=m.__H||(m.__H={__:[],__h:[]});return t>=_.__.length&&_.__.push({__V:W}),_.__[t]}function et(t){return O=1,Vt(Tt,t)}function Vt(t,e,_){var n=q(w++,2);if(n.t=t,!n.__c&&(n.__=[_?_(e):Tt(void 0,e),function(u){var l=n.__N?n.__N[0]:n.__[0],s=n.t(l,u);l!==s&&(n.__N=[s,n.__[1]],n.__c.setState({}))}],n.__c=m,!m.u)){var r=function(u,l,s){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!o||o.call(this,u,l,s);var i=!1;return p.forEach(function(h){if(h.__N){var c=h.__[0];h.__=h.__N,h.__N=void 0,c!==h.__[0]&&(i=!0)}}),!(!i&&n.__c.props===u)&&(!o||o.call(this,u,l,s))};m.u=!0;var o=m.shouldComponentUpdate,a=m.componentWillUpdate;m.componentWillUpdate=function(u,l,s){if(this.__e){var p=o;o=void 0,r(u,l,s),o=p}a&&a.call(this,u,l,s)},m.shouldComponentUpdate=r}return n.__N||n.__}function Ht(t,e){var _=q(w++,3);!b.__s&&Pt(_.__H,e)&&(_.__=t,_.i=e,m.__H.__h.push(_))}function wt(t){return O=5,Wt(function(){return{current:t}},[])}function Wt(t,e){var _=q(w++,7);return Pt(_.__H,e)?(_.__V=t(),_.i=e,_.__h=t,_.__V):_.__}function _t(t){var e=m.context[t.__c],_=q(w++,9);return _.c=t,e?(_.__==null&&(_.__=!0,e.sub(m)),e.props.value):t.__}function Rt(){for(var t;t=Et.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(R),t.__H.__h.forEach(tt),t.__H.__h=[]}catch(e){t.__H.__h=[],b.__e(e,t.__v)}}b.__b=function(t){m=null,yt&&yt(t)},b.__=function(t,e){e.__k&&e.__k.__m&&(t.__m=e.__k.__m),xt&&xt(t,e)},b.__r=function(t){gt&&gt(t),w=0;var e=(m=t.__c).__H;e&&(Z===m?(e.__h=[],m.__h=[],e.__.forEach(function(_){_.__N&&(_.__=_.__N),_.__V=W,_.__N=_.i=void 0})):(e.__h.forEach(R),e.__h.forEach(tt),e.__h=[],w=0)),Z=m},b.diffed=function(t){kt&&kt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Et.push(e)!==1&&bt===b.requestAnimationFrame||((bt=b.requestAnimationFrame)||Ot)(Rt)),e.__H.__.forEach(function(_){_.i&&(_.__H=_.i),_.__V!==W&&(_.__=_.__V),_.i=void 0,_.__V=W})),Z=m=null},b.__c=function(t,e){e.some(function(_){try{_.__h.forEach(R),_.__h=_.__h.filter(function(n){return!n.__||tt(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],b.__e(n,_.__v)}}),Ct&&Ct(t,e)},b.unmount=function(t){St&&St(t);var e,_=t.__c;_&&_.__H&&(_.__H.__.forEach(function(n){try{R(n)}catch(r){e=r}}),_.__H=void 0,e&&b.__e(e,_.__v))};var Dt=typeof requestAnimationFrame=="function";function Ot(t){var e,_=function(){clearTimeout(n),Dt&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(_,100);Dt&&(e=requestAnimationFrame(_))}function R(t){var e=m,_=t.__c;typeof _=="function"&&(t.__c=void 0,_()),m=e}function tt(t){var e=m;t.__c=t.__(),m=e}function Pt(t,e){return!t||t.length!==e.length||e.some(function(_,n){return _!==t[n]})}function Tt(t,e){return typeof e=="function"?e(t):e}function Nt(t){var e=Math.floor(t/3600),_=Math.floor(t%3600/60),n=Math.floor(t%60);let r="";return e&&(r+=String(e).padStart(2,"0")+":"),r+=String(_).padStart(2,"0")+":",r+=String(n).padStart(2,"0"),r}var nt=mt("");function qt(){let t=_t(nt),[e,_]=et(null);if(Ht(()=>{fetch("/-/datasette-scribe/api/jobs/".concat(t)).then(o=>o.json()).then(o=>_(o))},[]),!e)return f("div",null,"Loading...");let{completed_jobs:n,inprogress_jobs:r}=e;return f("div",null,f("table",null,f("thead",null,f("tr",null,f("th",null,"Submitted at"),f("th",null,"Title"),f("th",null,"Youtube Link"),f("th",null,"Duration"),f("th",null))),f("tbody",null,n.map(o=>{let a="/".concat(t,"/datasette_scribe_transcription_entries?transcript_id=").concat(o.transcript_id),{total_entries:u,total_speakers:l}=JSON.parse(o.entries_info);return f("tr",null,f("td",null,o.submitted_at),f("td",null,f("a",{href:"/-/datasette-scribe/transcripts/".concat(t,"/").concat(o.transcript_id)},o.title)),f("td",null,f("a",{href:"${d.url}",class:"outbound",target:"_blank",rel:"noopener noreferrer"},"link")),f("td",null,Nt(o.duration)),f("td",null,f("a",{href:a},"Transcript")," (","".concat(l," speaker").concat(l===1?"":"s"),")"))}))))}function It(){let t=wt(null),e=_t(nt);function _(){let n=t.current.value.split("\n").filter(r=>r);fetch("/-/datasette-scribe/api/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({database:e,urls:n})}).then(r=>r.json()).then(()=>{t.current.value=""})}return f("div",null,f("h2",null,"Submit a new Scribe Job"),f("p",null,"Paste Youtube video URLs below to have them transcribed.",f("br",null),"Separate multiple URLs on separate lines."," "),f("textarea",{ref:t,rows:8,cols:50}),f("br",null),f("button",{onClick:_},"Submit"))}function Bt(t){return f("div",null," ","Database:",f("select",null,f("option",null,t.databases.map(e=>e))))}function Jt(t){let[e,_]=et(t.databases[0]);return f(nt.Provider,{value:e},f(Bt,{databases:t.databases,onChange:n=>_(n)}),f("div",null,f("h1",null,"Datasette Scribe"),f(qt,null),f(It,null)))}async function zt(){let t=await fetch("/-/databases.json").then(e=>e.json()).then(e=>e.map(_=>_.name));vt(f(Jt,{databases:t}),document.querySelector("#root"))}document.addEventListener("DOMContentLoaded",zt);
